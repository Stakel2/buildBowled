{"ast":null,"code":"import axios from \"axios\";\nimport { toasts } from \"../component/common/Toast/Toast\";\nimport { REACT_APP_ADMIN } from \"../constant\";\nexport const adminApi = axios.create({\n  baseURL: REACT_APP_ADMIN\n});\nadminApi.interceptors.request.use(config => {\n  config.headers[\"Authorization\"] = localStorage.getItem(\"token\");\n  return config;\n});\n\nfunction formatUrl(url, params) {\n  params = params && Object.keys(params).length > 0 ? `?${new URLSearchParams(params).toString()}` : \"\";\n  return `${url}${params}`;\n}\n\nfunction handleError(error) {\n  var _error$response, _error$response2, _error$response3;\n\n  // error?.message && toasts.error(error.message);\n  console.log(\"Error typedata Admin => \", error === null || error === void 0 ? void 0 : error.response);\n\n  if (error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && _error$response.status && ((error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403 || (error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401)) {\n    toasts.error(\"Please re-login, last login session expired.\");\n    localStorage.clear();\n  } else {\n    var _error$response4, _error$response4$data;\n\n    (error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) && toasts.error(error.response.data.message);\n  }\n}\n\nfunction handleSuccess(res) {\n  if (res.status === 200) {\n    var _res$data;\n\n    res.message && toasts.success(res.message);\n    (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message) && toasts.success(res.data.message);\n  }\n\n  if (res.status === 403) {\n    res.message && toasts.warning(res.message);\n  }\n\n  if (res.status === 400) {\n    res.message && toasts.warning(res.message);\n  }\n}\n\nexport const adminApiCallPost = function (url, data) {\n  let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let toastOn = arguments.length > 3 ? arguments[3] : undefined;\n  return new Promise((resolve, reject) => {\n    adminApi.post(formatUrl(url, params), data).then(async response => {\n      var _resp$data, _resp$data$data;\n\n      let resp = (response === null || response === void 0 ? void 0 : response.response) == undefined ? response : response === null || response === void 0 ? void 0 : response.response;\n      let errorToast = true;\n\n      if ((resp === null || resp === void 0 ? void 0 : (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : (_resp$data$data = _resp$data.data) === null || _resp$data$data === void 0 ? void 0 : _resp$data$data.role) == \"user\") {\n        errorToast = await false; // handleError({ message: \"User not allowed\" });\n\n        toasts.error(\"User not allowed\");\n        toastOn = \"\";\n        reject(null);\n      }\n\n      if (toastOn == \"toastOn\") {\n        var _resp$data2;\n\n        if ((resp === null || resp === void 0 ? void 0 : (_resp$data2 = resp.data) === null || _resp$data2 === void 0 ? void 0 : _resp$data2.error) == true) {\n          // toastOn == \"toastOn\" && handleError(resp?.data);\n          toastOn == \"toastOn\" && toasts.error(resp === null || resp === void 0 ? void 0 : resp.data);\n          reject(null);\n        } else {\n          errorToast == true && toastOn == \"toastOn\" && handleSuccess(resp);\n          resolve(resp === null || resp === void 0 ? void 0 : resp.data);\n        }\n      }\n    }).catch(error => {\n      handleError(error);\n      reject(null);\n    });\n  });\n};\nexport const adminApiCallGet = function (url) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let toastOn = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(resolve => {\n    adminApi.get(formatUrl(url, params)).then(res => {\n      if (toastOn === \"toastOn\") {\n        handleSuccess(res);\n      }\n\n      resolve(res.data);\n    }).catch(error => {\n      handleError(error);\n      resolve(null);\n    });\n  });\n};\nexport const adminApiCallPut = function (url, data) {\n  let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let toastOn = arguments.length > 3 ? arguments[3] : undefined;\n  return new Promise(resolve => {\n    adminApi.put(formatUrl(url, params), data).then(res => {\n      if (toastOn === \"toastOn\") {\n        handleSuccess(res);\n      }\n\n      resolve(res.data);\n    }).catch(error => {\n      handleError(error);\n      resolve(null);\n    });\n  });\n};\nexport const adminApiCallPatch = function (url, data) {\n  let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let toastOn = arguments.length > 3 ? arguments[3] : undefined;\n  return new Promise(resolve => {\n    adminApi.patch(formatUrl(url, params), data).then(res => {\n      if (toastOn === \"toastOn\") {\n        handleSuccess(res);\n      }\n\n      resolve(res.data);\n    }).catch(error => {\n      handleError(error);\n      resolve(null);\n    });\n  });\n};\nexport const adminApiCallDelete = function (url) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let toastOn = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(resolve => {\n    adminApi.delete(formatUrl(url, params)).then(res => {\n      if (toastOn === \"toastOn\") {\n        handleSuccess(res);\n      }\n\n      resolve(res.data);\n    }).catch(error => {\n      handleError(error);\n      resolve(null);\n    });\n  });\n};","map":{"version":3,"names":["axios","toasts","REACT_APP_ADMIN","adminApi","create","baseURL","interceptors","request","use","config","headers","localStorage","getItem","formatUrl","url","params","Object","keys","length","URLSearchParams","toString","handleError","error","console","log","response","status","clear","data","message","handleSuccess","res","success","warning","adminApiCallPost","toastOn","Promise","resolve","reject","post","then","resp","undefined","errorToast","role","catch","adminApiCallGet","get","adminApiCallPut","put","adminApiCallPatch","patch","adminApiCallDelete","delete"],"sources":["/home/eagle/Projects/bouldl/src/Axios/Admin.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toasts } from \"../component/common/Toast/Toast\";\r\nimport { REACT_APP_ADMIN } from \"../constant\";\r\n\r\nexport const adminApi = axios.create({\r\n  baseURL: REACT_APP_ADMIN,\r\n});\r\n\r\nadminApi.interceptors.request.use((config) => {\r\n  config.headers[\"Authorization\"] = localStorage.getItem(\"token\");\r\n  return config;\r\n});\r\n\r\nfunction formatUrl(url, params) {\r\n  params =\r\n    params && Object.keys(params).length > 0\r\n      ? `?${new URLSearchParams(params).toString()}`\r\n      : \"\";\r\n  return `${url}${params}`;\r\n}\r\n\r\nfunction handleError(error) {\r\n  // error?.message && toasts.error(error.message);\r\n  console.log(\"Error typedata Admin => \", error?.response);\r\n  if (\r\n    error?.response?.status &&\r\n    (error?.response?.status === 403 || error?.response?.status === 401)\r\n  ) {\r\n    toasts.error(\"Please re-login, last login session expired.\");\r\n    localStorage.clear();\r\n  } else {\r\n    error?.response?.data?.message && toasts.error(error.response.data.message);\r\n  }\r\n}\r\n\r\nfunction handleSuccess(res) {\r\n  if (res.status === 200) {\r\n    res.message && toasts.success(res.message);\r\n    res?.data?.message && toasts.success(res.data.message);\r\n  }\r\n  if (res.status === 403) {\r\n    res.message && toasts.warning(res.message);\r\n  }\r\n  if (res.status === 400) {\r\n    res.message && toasts.warning(res.message);\r\n  }\r\n}\r\n\r\nexport const adminApiCallPost = (url, data, params = {}, toastOn) =>\r\n  new Promise((resolve, reject) => {\r\n    adminApi\r\n      .post(formatUrl(url, params), data)\r\n      .then(async (response) => {\r\n        let resp =\r\n          response?.response == undefined ? response : response?.response;\r\n        let errorToast = true;\r\n        if (resp?.data?.data?.role == \"user\") {\r\n          errorToast = await false;\r\n          // handleError({ message: \"User not allowed\" });\r\n          toasts.error(\"User not allowed\");\r\n          toastOn = \"\";\r\n          reject(null);\r\n        }\r\n        if (toastOn == \"toastOn\") {\r\n          if (resp?.data?.error == true) {\r\n            // toastOn == \"toastOn\" && handleError(resp?.data);\r\n            toastOn == \"toastOn\" && toasts.error(resp?.data);\r\n            reject(null);\r\n          } else {\r\n            errorToast == true && toastOn == \"toastOn\" && handleSuccess(resp);\r\n            resolve(resp?.data);\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        handleError(error);\r\n        reject(null);\r\n      });\r\n  });\r\n\r\nexport const adminApiCallGet = (url, params = {}, toastOn) => {\r\n  return new Promise((resolve) => {\r\n    adminApi\r\n      .get(formatUrl(url, params))\r\n      .then((res) => {\r\n        if (toastOn === \"toastOn\") {\r\n          handleSuccess(res);\r\n        }\r\n        resolve(res.data);\r\n      })\r\n      .catch((error) => {\r\n        handleError(error);\r\n        resolve(null);\r\n      });\r\n  });\r\n};\r\nexport const adminApiCallPut = (url, data, params = {}, toastOn) =>\r\n  new Promise((resolve) => {\r\n    adminApi\r\n      .put(formatUrl(url, params), data)\r\n      .then((res) => {\r\n        if (toastOn === \"toastOn\") {\r\n          handleSuccess(res);\r\n        }\r\n        resolve(res.data);\r\n      })\r\n      .catch((error) => {\r\n        handleError(error);\r\n        resolve(null);\r\n      });\r\n  });\r\n\r\nexport const adminApiCallPatch = (url, data, params = {}, toastOn) =>\r\n  new Promise((resolve) => {\r\n    adminApi\r\n      .patch(formatUrl(url, params), data)\r\n      .then((res) => {\r\n        if (toastOn === \"toastOn\") {\r\n          handleSuccess(res);\r\n        }\r\n        resolve(res.data);\r\n      })\r\n      .catch((error) => {\r\n        handleError(error);\r\n        resolve(null);\r\n      });\r\n  });\r\n\r\nexport const adminApiCallDelete = (url, params = {}, toastOn) => {\r\n  return new Promise((resolve) => {\r\n    adminApi\r\n      .delete(formatUrl(url, params))\r\n      .then((res) => {\r\n        if (toastOn === \"toastOn\") {\r\n          handleSuccess(res);\r\n        }\r\n        resolve(res.data);\r\n      })\r\n      .catch((error) => {\r\n        handleError(error);\r\n        resolve(null);\r\n      });\r\n  });\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,iCAAvB;AACA,SAASC,eAAT,QAAgC,aAAhC;AAEA,OAAO,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAa;EACnCC,OAAO,EAAEH;AAD0B,CAAb,CAAjB;AAIPC,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAmCC,MAAD,IAAY;EAC5CA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkCC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlC;EACA,OAAOH,MAAP;AACD,CAHD;;AAKA,SAASI,SAAT,CAAmBC,GAAnB,EAAwBC,MAAxB,EAAgC;EAC9BA,MAAM,GACJA,MAAM,IAAIC,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoBG,MAApB,GAA6B,CAAvC,GACK,IAAG,IAAIC,eAAJ,CAAoBJ,MAApB,EAA4BK,QAA5B,EAAuC,EAD/C,GAEI,EAHN;EAIA,OAAQ,GAAEN,GAAI,GAAEC,MAAO,EAAvB;AACD;;AAED,SAASM,WAAT,CAAqBC,KAArB,EAA4B;EAAA;;EAC1B;EACAC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCF,KAAxC,aAAwCA,KAAxC,uBAAwCA,KAAK,CAAEG,QAA/C;;EACA,IACEH,KAAK,SAAL,IAAAA,KAAK,WAAL,uBAAAA,KAAK,CAAEG,QAAP,4DAAiBC,MAAjB,KACC,CAAAJ,KAAK,SAAL,IAAAA,KAAK,WAAL,gCAAAA,KAAK,CAAEG,QAAP,sEAAiBC,MAAjB,MAA4B,GAA5B,IAAmC,CAAAJ,KAAK,SAAL,IAAAA,KAAK,WAAL,gCAAAA,KAAK,CAAEG,QAAP,sEAAiBC,MAAjB,MAA4B,GADhE,CADF,EAGE;IACAzB,MAAM,CAACqB,KAAP,CAAa,8CAAb;IACAX,YAAY,CAACgB,KAAb;EACD,CAND,MAMO;IAAA;;IACL,CAAAL,KAAK,SAAL,IAAAA,KAAK,WAAL,gCAAAA,KAAK,CAAEG,QAAP,+FAAiBG,IAAjB,gFAAuBC,OAAvB,KAAkC5B,MAAM,CAACqB,KAAP,CAAaA,KAAK,CAACG,QAAN,CAAeG,IAAf,CAAoBC,OAAjC,CAAlC;EACD;AACF;;AAED,SAASC,aAAT,CAAuBC,GAAvB,EAA4B;EAC1B,IAAIA,GAAG,CAACL,MAAJ,KAAe,GAAnB,EAAwB;IAAA;;IACtBK,GAAG,CAACF,OAAJ,IAAe5B,MAAM,CAAC+B,OAAP,CAAeD,GAAG,CAACF,OAAnB,CAAf;IACA,CAAAE,GAAG,SAAH,IAAAA,GAAG,WAAH,yBAAAA,GAAG,CAAEH,IAAL,wDAAWC,OAAX,KAAsB5B,MAAM,CAAC+B,OAAP,CAAeD,GAAG,CAACH,IAAJ,CAASC,OAAxB,CAAtB;EACD;;EACD,IAAIE,GAAG,CAACL,MAAJ,KAAe,GAAnB,EAAwB;IACtBK,GAAG,CAACF,OAAJ,IAAe5B,MAAM,CAACgC,OAAP,CAAeF,GAAG,CAACF,OAAnB,CAAf;EACD;;EACD,IAAIE,GAAG,CAACL,MAAJ,KAAe,GAAnB,EAAwB;IACtBK,GAAG,CAACF,OAAJ,IAAe5B,MAAM,CAACgC,OAAP,CAAeF,GAAG,CAACF,OAAnB,CAAf;EACD;AACF;;AAED,OAAO,MAAMK,gBAAgB,GAAG,UAACpB,GAAD,EAAMc,IAAN;EAAA,IAAYb,MAAZ,uEAAqB,EAArB;EAAA,IAAyBoB,OAAzB;EAAA,OAC9B,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IAC/BnC,QAAQ,CACLoC,IADH,CACQ1B,SAAS,CAACC,GAAD,EAAMC,MAAN,CADjB,EACgCa,IADhC,EAEGY,IAFH,CAEQ,MAAOf,QAAP,IAAoB;MAAA;;MACxB,IAAIgB,IAAI,GACN,CAAAhB,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEA,QAAV,KAAsBiB,SAAtB,GAAkCjB,QAAlC,GAA6CA,QAA7C,aAA6CA,QAA7C,uBAA6CA,QAAQ,CAAEA,QADzD;MAEA,IAAIkB,UAAU,GAAG,IAAjB;;MACA,IAAI,CAAAF,IAAI,SAAJ,IAAAA,IAAI,WAAJ,0BAAAA,IAAI,CAAEb,IAAN,6EAAYA,IAAZ,oEAAkBgB,IAAlB,KAA0B,MAA9B,EAAsC;QACpCD,UAAU,GAAG,MAAM,KAAnB,CADoC,CAEpC;;QACA1C,MAAM,CAACqB,KAAP,CAAa,kBAAb;QACAa,OAAO,GAAG,EAAV;QACAG,MAAM,CAAC,IAAD,CAAN;MACD;;MACD,IAAIH,OAAO,IAAI,SAAf,EAA0B;QAAA;;QACxB,IAAI,CAAAM,IAAI,SAAJ,IAAAA,IAAI,WAAJ,2BAAAA,IAAI,CAAEb,IAAN,4DAAYN,KAAZ,KAAqB,IAAzB,EAA+B;UAC7B;UACAa,OAAO,IAAI,SAAX,IAAwBlC,MAAM,CAACqB,KAAP,CAAamB,IAAb,aAAaA,IAAb,uBAAaA,IAAI,CAAEb,IAAnB,CAAxB;UACAU,MAAM,CAAC,IAAD,CAAN;QACD,CAJD,MAIO;UACLK,UAAU,IAAI,IAAd,IAAsBR,OAAO,IAAI,SAAjC,IAA8CL,aAAa,CAACW,IAAD,CAA3D;UACAJ,OAAO,CAACI,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEb,IAAP,CAAP;QACD;MACF;IACF,CAvBH,EAwBGiB,KAxBH,CAwBUvB,KAAD,IAAW;MAChBD,WAAW,CAACC,KAAD,CAAX;MACAgB,MAAM,CAAC,IAAD,CAAN;IACD,CA3BH;EA4BD,CA7BD,CAD8B;AAAA,CAAzB;AAgCP,OAAO,MAAMQ,eAAe,GAAG,UAAChC,GAAD,EAA+B;EAAA,IAAzBC,MAAyB,uEAAhB,EAAgB;EAAA,IAAZoB,OAAY;EAC5D,OAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;IAC9BlC,QAAQ,CACL4C,GADH,CACOlC,SAAS,CAACC,GAAD,EAAMC,MAAN,CADhB,EAEGyB,IAFH,CAEST,GAAD,IAAS;MACb,IAAII,OAAO,KAAK,SAAhB,EAA2B;QACzBL,aAAa,CAACC,GAAD,CAAb;MACD;;MACDM,OAAO,CAACN,GAAG,CAACH,IAAL,CAAP;IACD,CAPH,EAQGiB,KARH,CAQUvB,KAAD,IAAW;MAChBD,WAAW,CAACC,KAAD,CAAX;MACAe,OAAO,CAAC,IAAD,CAAP;IACD,CAXH;EAYD,CAbM,CAAP;AAcD,CAfM;AAgBP,OAAO,MAAMW,eAAe,GAAG,UAAClC,GAAD,EAAMc,IAAN;EAAA,IAAYb,MAAZ,uEAAqB,EAArB;EAAA,IAAyBoB,OAAzB;EAAA,OAC7B,IAAIC,OAAJ,CAAaC,OAAD,IAAa;IACvBlC,QAAQ,CACL8C,GADH,CACOpC,SAAS,CAACC,GAAD,EAAMC,MAAN,CADhB,EAC+Ba,IAD/B,EAEGY,IAFH,CAEST,GAAD,IAAS;MACb,IAAII,OAAO,KAAK,SAAhB,EAA2B;QACzBL,aAAa,CAACC,GAAD,CAAb;MACD;;MACDM,OAAO,CAACN,GAAG,CAACH,IAAL,CAAP;IACD,CAPH,EAQGiB,KARH,CAQUvB,KAAD,IAAW;MAChBD,WAAW,CAACC,KAAD,CAAX;MACAe,OAAO,CAAC,IAAD,CAAP;IACD,CAXH;EAYD,CAbD,CAD6B;AAAA,CAAxB;AAgBP,OAAO,MAAMa,iBAAiB,GAAG,UAACpC,GAAD,EAAMc,IAAN;EAAA,IAAYb,MAAZ,uEAAqB,EAArB;EAAA,IAAyBoB,OAAzB;EAAA,OAC/B,IAAIC,OAAJ,CAAaC,OAAD,IAAa;IACvBlC,QAAQ,CACLgD,KADH,CACStC,SAAS,CAACC,GAAD,EAAMC,MAAN,CADlB,EACiCa,IADjC,EAEGY,IAFH,CAEST,GAAD,IAAS;MACb,IAAII,OAAO,KAAK,SAAhB,EAA2B;QACzBL,aAAa,CAACC,GAAD,CAAb;MACD;;MACDM,OAAO,CAACN,GAAG,CAACH,IAAL,CAAP;IACD,CAPH,EAQGiB,KARH,CAQUvB,KAAD,IAAW;MAChBD,WAAW,CAACC,KAAD,CAAX;MACAe,OAAO,CAAC,IAAD,CAAP;IACD,CAXH;EAYD,CAbD,CAD+B;AAAA,CAA1B;AAgBP,OAAO,MAAMe,kBAAkB,GAAG,UAACtC,GAAD,EAA+B;EAAA,IAAzBC,MAAyB,uEAAhB,EAAgB;EAAA,IAAZoB,OAAY;EAC/D,OAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;IAC9BlC,QAAQ,CACLkD,MADH,CACUxC,SAAS,CAACC,GAAD,EAAMC,MAAN,CADnB,EAEGyB,IAFH,CAEST,GAAD,IAAS;MACb,IAAII,OAAO,KAAK,SAAhB,EAA2B;QACzBL,aAAa,CAACC,GAAD,CAAb;MACD;;MACDM,OAAO,CAACN,GAAG,CAACH,IAAL,CAAP;IACD,CAPH,EAQGiB,KARH,CAQUvB,KAAD,IAAW;MAChBD,WAAW,CAACC,KAAD,CAAX;MACAe,OAAO,CAAC,IAAD,CAAP;IACD,CAXH;EAYD,CAbM,CAAP;AAcD,CAfM"},"metadata":{},"sourceType":"module"}