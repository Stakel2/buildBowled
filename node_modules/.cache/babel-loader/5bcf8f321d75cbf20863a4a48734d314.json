{"ast":null,"code":"var _jsxFileName = \"/home/eagle/Projects/bouldl/src/component/pages/public/login/ForgetPassword.js\",\n    _s = $RefreshSig$();\n\nimport { Form, Formik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\nimport { HeaderSign, LoaderAnimated, StylishButton } from \"../../../common\";\nimport * as Yup from \"yup\";\nimport OTPInput, { ResendOTP } from \"otp-input-react\";\nimport FormikControl from \"../../../common/FormikControl\";\nimport { userApiCallPost, userApiCallPostWithoutHeader } from \"../../../../Axios/UserAuth\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport OtpLayout from \"../../../common/OtpLayout/OtpLayout\";\nimport \"./LoginStyle.scss\";\nimport { decode as base64_decode, encode as base64_encode } from \"base-64\";\nimport { brandsApiCallPost } from \"../../../../Axios/Brands\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ForgetPassword = _ref => {\n  _s();\n\n  let {\n    back\n  } = _ref;\n  const [loading, setLoading] = useState(false);\n  const [showOtpLay, setShowOtpLay] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const navigate = useNavigate();\n  const initialValues = {\n    email: \"\",\n    passWord: \"\"\n  };\n  const validationSchema = Yup.object({\n    email: Yup.string().email(\"Email must be a valid Email\").required(\" Email address is required.\")\n  });\n\n  function onSubmit(value) {\n    const newData = {\n      email: email\n    };\n    let encoded = base64_encode(`email----forget_password----${email}----${value}`);\n    setLoading(true);\n    userApiCallPost(\"/forgot-password\", newData, encoded, {}, \"toastOn\").then(async res => {\n      let data = await (res === null || res === void 0 ? void 0 : res.data);\n      setLoading(false);\n      navigate(\"/login\"); // if (data) {\n      //   Interceptor.axiosInterceptor(\n      //     { user: { ...data, userRole: data.role } },\n      //     loginDispatch,\n      //     props.setRedirectToLogin,\n      //     props.setLoading\n      //   );\n      //   await loginDispatch({\n      //     type: \"userInfo\",\n      //     payload: { ...data, userRole: data.role },\n      //   });\n      //   setTimeout(() => {\n      //     navigate(\"/marketplace\");\n      //   }, 500);\n      // }\n    }).catch(err => {\n      setLoading(false);\n    });\n  }\n\n  function resendOtp() {\n    generateOtp(email);\n  }\n\n  function getOtp(value) {\n    generateOtp(value.email);\n    setEmail(value.email);\n  }\n\n  function generateOtp(mail) {\n    const newData = {\n      type: \"email\",\n      action: \"forget_password\",\n      value: mail\n    };\n    setLoading(true); //api-stage.bowled.io/otp/generate\n\n    brandsApiCallPost(\"/users/otp/api/v1/generate\", newData, {}, \"toastOn\").then(async res => {\n      let data = await (res === null || res === void 0 ? void 0 : res.data); // console.log(\"DATA \", data);\n      // console.log(\"data.data.accessToken \", data.accessToken);\n\n      setLoading(false);\n      setShowOtpLay(true);\n\n      if (data) {}\n    }).catch(err => {\n      var _err$response, _err$response$data;\n\n      if ((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) === \"Email must be verified\") {\n        setShowOtpLay(true);\n      }\n\n      setLoading(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(LoaderAnimated, {\n      isLoading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inner_pages_flow verify_page forgot_pass\",\n      children: [!showOtpLay && /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: 12,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rg_title\",\n            children: [/*#__PURE__*/_jsxDEV(StylishButton, {\n              title: \"Back\",\n              className: \"backbtn\",\n              onClick: () => {\n                navigate(\"/login\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Forgot your password?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Enter your Email. We will e-mailed you a 6 digit code.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: initialValues,\n          validationSchema: validationSchema,\n          onSubmit: getOtp,\n          children: formik => {\n            return /*#__PURE__*/_jsxDEV(Form, {\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                className: \"forgot_email\",\n                children: [/*#__PURE__*/_jsxDEV(FormikControl, {\n                  className: \"east_form_input\",\n                  control: \"input\",\n                  label: \"Enter your email*\",\n                  type: \"email\",\n                  placeholder: \"e.g. bowled@gmail.com\",\n                  name: \"email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"get_otp_link btn_f\",\n                  disabled: !(formik.isValid && formik.dirty),\n                  type: \"submit\",\n                  children: \"Get OTP\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 21\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          lg: 12,\n          children: /*#__PURE__*/_jsxDEV(OtpLayout, {\n            back: onClick => {\n              setShowOtpLay(false);\n            },\n            onclick: onSubmit,\n            resend: resendOtp,\n            showOtpLay: showOtpLay\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ForgetPassword, \"D9vGjB3GqiNzPuD9BKuhnt8lZ5U=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ForgetPassword;\nexport default ForgetPassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ForgetPassword\");","map":{"version":3,"names":["Form","Formik","React","useState","Button","Col","Container","Row","HeaderSign","LoaderAnimated","StylishButton","Yup","OTPInput","ResendOTP","FormikControl","userApiCallPost","userApiCallPostWithoutHeader","Link","useNavigate","OtpLayout","decode","base64_decode","encode","base64_encode","brandsApiCallPost","ForgetPassword","back","loading","setLoading","showOtpLay","setShowOtpLay","email","setEmail","navigate","initialValues","passWord","validationSchema","object","string","required","onSubmit","value","newData","encoded","then","res","data","catch","err","resendOtp","generateOtp","getOtp","mail","type","action","response","message","formik","isValid","dirty","onClick"],"sources":["/home/eagle/Projects/bouldl/src/component/pages/public/login/ForgetPassword.js"],"sourcesContent":["import { Form, Formik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\nimport {\n  HeaderSign,\n  LoaderAnimated,\n  StylishButton,\n} from \"../../../common\";\nimport * as Yup from \"yup\";\nimport OTPInput, { ResendOTP } from \"otp-input-react\";\nimport FormikControl from \"../../../common/FormikControl\";\nimport { userApiCallPost,userApiCallPostWithoutHeader } from \"../../../../Axios/UserAuth\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport OtpLayout from \"../../../common/OtpLayout/OtpLayout\";\nimport \"./LoginStyle.scss\";\nimport { decode as base64_decode, encode as base64_encode } from \"base-64\";\nimport { brandsApiCallPost } from \"../../../../Axios/Brands\";\n\nconst ForgetPassword = ({back}) => {\n  const [loading, setLoading] = useState(false);\n  const [showOtpLay, setShowOtpLay] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const navigate = useNavigate();\n  const initialValues = {\n    email: \"\",\n    passWord: \"\",\n  };\n  const validationSchema = Yup.object({\n    email: Yup.string()\n      .email(\"Email must be a valid Email\")\n      .required(\" Email address is required.\"),\n  });\n\n  function onSubmit(value) {\n    const newData = {\n      email: email,\n    };\n    let encoded = base64_encode(\n      `email----forget_password----${email}----${value}`\n    );\n\n    setLoading(true);\n    userApiCallPost(\"/forgot-password\", newData, encoded, {}, \"toastOn\")\n      .then(async (res) => {\n        let data = await res?.data;\n        setLoading(false);\n        navigate(\"/login\");\n        // if (data) {\n        //   Interceptor.axiosInterceptor(\n        //     { user: { ...data, userRole: data.role } },\n        //     loginDispatch,\n        //     props.setRedirectToLogin,\n        //     props.setLoading\n        //   );\n        //   await loginDispatch({\n        //     type: \"userInfo\",\n        //     payload: { ...data, userRole: data.role },\n        //   });\n        //   setTimeout(() => {\n        //     navigate(\"/marketplace\");\n        //   }, 500);\n        // }\n      })\n      .catch((err) => {\n        setLoading(false);\n      });\n  }\n  \n  function resendOtp() {\n    generateOtp(email);\n  }\n  function getOtp(value) {\n    generateOtp(value.email);\n    setEmail(value.email);\n  }\n\n  function generateOtp(mail) {\n    const newData = {\n      type: \"email\",\n      action: \"forget_password\",\n      value: mail,\n    };\n\n    setLoading(true);\n    //api-stage.bowled.io/otp/generate\n\n    brandsApiCallPost(\"/users/otp/api/v1/generate\", newData, {}, \"toastOn\")\n      .then(async (res) => {\n        let data = await res?.data;\n        // console.log(\"DATA \", data);\n        // console.log(\"data.data.accessToken \", data.accessToken);\n        setLoading(false);\n        setShowOtpLay(true);\n        if (data) {\n        }\n      })\n      .catch((err) => {\n        if (err?.response?.data?.message === \"Email must be verified\") {\n          setShowOtpLay(true);\n        }\n        setLoading(false);\n      });\n  }\n\n  return (\n    <>\n      <LoaderAnimated isLoading={loading} />\n        <div className=\"inner_pages_flow verify_page forgot_pass\">\n          {!showOtpLay && (\n            <Row>\n              <Col lg={12}>\n                <div className=\"rg_title\">\n                <StylishButton\n                     title=\"Back\"\n                     className=\"backbtn\"\n                     onClick= {() => {\n                      navigate(\"/login\");\n                      }}\n                        />\n                  <h2>Forgot your password?</h2>\n                  <p>Enter your Email. We will e-mailed you a 6 digit code.</p>\n                </div>\n              </Col>\n              <Formik\n                initialValues={initialValues}\n                validationSchema={validationSchema}\n                onSubmit={getOtp}\n              >\n                {(formik) => {\n                  return (\n                    <Form>\n                      <Col className=\"forgot_email\">\n                        <FormikControl\n                          className=\"east_form_input\"\n                          control=\"input\"\n                          label=\"Enter your email*\"\n                          type=\"email\"\n                          placeholder=\"e.g. bowled@gmail.com\"\n                          name=\"email\"\n                        />\n\n                        <button\n                          className=\"get_otp_link btn_f\"\n                          disabled={!(formik.isValid && formik.dirty)}\n                          type=\"submit\"\n                        >\n                          Get OTP\n                        </button>\n                      </Col>\n                    </Form>\n                  );\n                }}\n              </Formik>\n            </Row>\n          )}\n          <Row>\n            <Col lg={12}>\n              <OtpLayout\n                back={(onClick) => {\n                  setShowOtpLay(false);\n                }}\n                onclick={onSubmit}\n                resend={resendOtp}\n                showOtpLay={showOtpLay}\n              />\n            </Col>\n          </Row>\n        </div>\n    </>\n  );\n};\n\nexport default ForgetPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}