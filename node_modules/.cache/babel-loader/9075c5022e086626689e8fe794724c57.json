{"ast":null,"code":"var _jsxFileName = \"/home/eagle/Projects/bouldl/src/component/common/paypal/paypal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { PayPalScriptProvider, PayPalButtons, usePayPalScriptReducer } from \"@paypal/react-paypal-js\";\nimport { toasts } from \"../Toast/Toast\";\nimport { PAYPAL_CLIENT_ID } from \"../../../constant\"; // const amount = \"2\";\n// const currency = \"USD\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  layout: \"vertical\"\n}; // Custom component to wrap the PayPalButtons and handle currency changes\n\nconst ButtonWrapper = _ref => {\n  _s();\n\n  let {\n    amount,\n    currency,\n    showSpinner,\n    onCreatePayment,\n    onPaymentSucess,\n    onPaymentError,\n    onPaymentCancel\n  } = _ref;\n  // usePayPalScriptReducer can be use only inside children of PayPalScriptProviders\n  // This is the main reason to wrap the PayPalButtons in a new component\n  const [{\n    options,\n    isPending,\n    isResolved,\n    isInitial,\n    isRejected\n  }, dispatch] = usePayPalScriptReducer();\n  useEffect(() => {\n    dispatch({\n      type: \"resetOptions\",\n      value: { ...options,\n        currency: currency\n      }\n    });\n  }, [currency, showSpinner]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showSpinner && isPending && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 36\n    }, this), /*#__PURE__*/_jsxDEV(PayPalButtons, {\n      style: style,\n      disabled: false,\n      forceReRender: [amount, currency, style],\n      fundingSource: undefined,\n      createOrder: (data, actions) => {\n        return actions.order.create({\n          purchase_units: [{\n            amount: {\n              currency_code: currency,\n              value: amount\n            }\n          }],\n          application_context: {\n            shipping_preference: \"NO_SHIPPING\"\n          }\n        }).then(orderId => {\n          console.log(\"order Id\", orderId);\n          onCreatePayment(orderId, \"PAYPAL\"); // Your code here after create the order\n\n          return orderId;\n        });\n      },\n      onApprove: function (data, actions) {\n        return actions.order.capture().then(function (res) {\n          onPaymentSucess(res, \"PAYPAL\"); // Your code here after capture the order\n        });\n      },\n      onError: function (data, actions) {\n        toasts.error(\"An Error occured with your payment \");\n        onPaymentError();\n      },\n      onCancel: function (data, action) {\n        onPaymentCancel(data);\n      },\n      onShippingChange: function (data, action) {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ButtonWrapper, \"lfbhNKNntzOjKJe53Y1dQ0203WI=\", false, function () {\n  return [usePayPalScriptReducer];\n});\n\n_c = ButtonWrapper;\nexport default function PaypalButton(_ref2) {\n  let {\n    amount,\n    currency,\n    onCreatePayment,\n    onPaymentSucess,\n    onPaymentError,\n    onPaymentCancel\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"750px\",\n      minHeight: \"200px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(PayPalScriptProvider, {\n      options: {\n        \"client-id\": PAYPAL_CLIENT_ID,\n        components: \"buttons\",\n        currency: currency\n      },\n      children: /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n        onCreatePayment: onCreatePayment,\n        onPaymentSucess: onPaymentSucess,\n        onPaymentError: onPaymentError,\n        onPaymentCancel: onPaymentCancel,\n        amount: amount,\n        currency: currency,\n        showSpinner: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}\n_c2 = PaypalButton;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ButtonWrapper\");\n$RefreshReg$(_c2, \"PaypalButton\");","map":{"version":3,"names":["React","useState","useEffect","PayPalScriptProvider","PayPalButtons","usePayPalScriptReducer","toasts","PAYPAL_CLIENT_ID","style","layout","ButtonWrapper","amount","currency","showSpinner","onCreatePayment","onPaymentSucess","onPaymentError","onPaymentCancel","options","isPending","isResolved","isInitial","isRejected","dispatch","type","value","undefined","data","actions","order","create","purchase_units","currency_code","application_context","shipping_preference","then","orderId","console","log","capture","res","error","action","PaypalButton","maxWidth","minHeight","components"],"sources":["/home/eagle/Projects/bouldl/src/component/common/paypal/paypal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  PayPalScriptProvider,\r\n  PayPalButtons,\r\n  usePayPalScriptReducer,\r\n} from \"@paypal/react-paypal-js\";\r\nimport { toasts } from \"../Toast/Toast\";\r\nimport { PAYPAL_CLIENT_ID } from \"../../../constant\";\r\n\r\n// const amount = \"2\";\r\n// const currency = \"USD\";\r\nconst style = { layout: \"vertical\" };\r\n\r\n// Custom component to wrap the PayPalButtons and handle currency changes\r\nconst ButtonWrapper = ({\r\n  amount,\r\n  currency,\r\n  showSpinner,\r\n  onCreatePayment,\r\n  onPaymentSucess,\r\n  onPaymentError,\r\n  onPaymentCancel,\r\n}) => {\r\n  // usePayPalScriptReducer can be use only inside children of PayPalScriptProviders\r\n  // This is the main reason to wrap the PayPalButtons in a new component\r\n  const [{ options, isPending, isResolved, isInitial, isRejected }, dispatch] =\r\n    usePayPalScriptReducer();\r\n\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: \"resetOptions\",\r\n      value: {\r\n        ...options,\r\n        currency: currency,\r\n      },\r\n    });\r\n  }, [currency, showSpinner]);\r\n\r\n  return (\r\n    <>\r\n      {showSpinner && isPending && <div className=\"spinner\" />}\r\n      <PayPalButtons\r\n        style={style}\r\n        disabled={false}\r\n        forceReRender={[amount, currency, style]}\r\n        fundingSource={undefined}\r\n        createOrder={(data, actions) => {\r\n          return actions.order\r\n            .create({\r\n              purchase_units: [\r\n                {\r\n                  amount: {\r\n                    currency_code: currency,\r\n                    value: amount,\r\n                  },\r\n                },\r\n              ],\r\n              application_context: {\r\n                shipping_preference: \"NO_SHIPPING\",\r\n              },\r\n            })\r\n\r\n            .then((orderId) => {\r\n              console.log(\"order Id\", orderId);\r\n              onCreatePayment(orderId, \"PAYPAL\");\r\n              // Your code here after create the order\r\n              return orderId;\r\n            });\r\n        }}\r\n        onApprove={function (data, actions) {\r\n          return actions.order.capture().then(function (res) {\r\n            onPaymentSucess(res, \"PAYPAL\");\r\n            // Your code here after capture the order\r\n          });\r\n        }}\r\n        onError={function (data, actions) {\r\n          toasts.error(\"An Error occured with your payment \");\r\n          onPaymentError();\r\n        }}\r\n        onCancel={function (data, action) {\r\n          onPaymentCancel(data);\r\n        }}\r\n        onShippingChange={function (data, action) {}}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function PaypalButton({\r\n  amount,\r\n  currency,\r\n  onCreatePayment,\r\n  onPaymentSucess,\r\n  onPaymentError,\r\n  onPaymentCancel,\r\n}) {\r\n  return (\r\n    <div style={{ maxWidth: \"750px\", minHeight: \"200px\" }}>\r\n      <PayPalScriptProvider\r\n        options={{\r\n          \"client-id\": PAYPAL_CLIENT_ID,\r\n          components: \"buttons\",\r\n          currency: currency,\r\n        }}\r\n      >\r\n        <ButtonWrapper\r\n          onCreatePayment={onCreatePayment}\r\n          onPaymentSucess={onPaymentSucess}\r\n          onPaymentError={onPaymentError}\r\n          onPaymentCancel={onPaymentCancel}\r\n          amount={amount}\r\n          currency={currency}\r\n          showSpinner={false}\r\n        />\r\n      </PayPalScriptProvider>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}