{"ast":null,"code":"var _jsxFileName = \"/home/eagle/Projects/bouldl/src/component/pages/public/mysterybox/Mysterybox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Breadcrumb, Col, Container, Row } from \"react-bootstrap\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { brandsApiCallGet, brandsApiCallPost } from \"../../../../Axios/Brands\";\nimport { context } from \"../../../../Context/MainContext\";\nimport { EventsBlock, Layout, LoaderAnimated, ModalCustom, SliderRaffles } from \"../../../common\";\nimport MysteryBoxDesc from \"../../../common/mysteryBoxDesc/MysteryBoxDesc\";\nimport PaypalButton from \"../../../common/paypal/paypal\";\nimport { toasts } from \"../../../common/Toast/Toast\";\nimport banner from \"../../../../assets/images/home/home_banner.jpg\";\nimport BreadcrumbCustom from \"../../../common/breadcrumb/BreadcrumbCustom\";\nimport LogoBanner from \"../../../common/logoBanner/LogoBanner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Mysterybox = props => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [mysteryBox, setMysteryBox] = useState({});\n  const {\n    loginState\n  } = useContext(context);\n  const [showModal, setShowModal] = useState(false);\n\n  const handleClose = () => setShowModal(false);\n\n  const navigate = useNavigate();\n  const params = useParams();\n  const mysteryBoxData = props.location.state.mysteryBox;\n  console.log(\"mysteryBoxData\", mysteryBoxData);\n  useEffect(() => {\n    getMysteryBox(params.id);\n  }, []);\n\n  const getMysteryBox = id => {\n    setLoading(true);\n    brandsApiCallGet(`mysterybox/api/v1/${id}`).then(res => {\n      setLoading(false);\n      setMysteryBox(res === null || res === void 0 ? void 0 : res.data);\n    }).catch(error => {\n      setLoading(false);\n    });\n  };\n\n  const buyHandler = () => {\n    if (loginState.user.accessToken) {\n      setShowModal(true);\n    } else {\n      toasts.error(\"Please Login\");\n    }\n  };\n\n  const onCreatePayment = (id, type) => {\n    setLoading(true);\n\n    if (loginState.user.accessToken) {} else {\n      setLoading(false);\n      toasts.error(\"Please Login\");\n    }\n  };\n\n  const onPaymentSucess = (res, type) => {\n    setLoading(true);\n    console.log(\"onPaymentSucess\", res);\n    let data = {\n      order_id: res === null || res === void 0 ? void 0 : res.id,\n      mystery_box_id: mysteryBox.id,\n      payment_status: res === null || res === void 0 ? void 0 : res.status,\n      payment_id: res.purchase_units[0].payments.captures[0].id,\n      // payment_gateway_id: \"PAYPAL\",\n      amount: res.purchase_units[0].amount.value\n    };\n    brandsApiCallPost(`mysterybox/api/v1/buy-mysterybox`, data, {}, \"toastOn\").then(res => {\n      setLoading(false);\n      setShowModal(false);\n      navigate.goBack();\n      console.log(\"buyHandler\", res);\n    }).catch(error => {\n      setLoading(false);\n      setShowModal(false);\n    });\n  };\n\n  const onPaymentError = () => {\n    setLoading(false);\n    navigate(\"/user/order/failed\");\n  };\n\n  const onPaymentCancel = res => {\n    navigate(\"/user/order/failed\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    style: {\n      paddingLeft: \"0px\",\n      paddingRight: \"0px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(LoaderAnimated, {\n      isLoading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: \"mainBannerStyle\",\n      children: /*#__PURE__*/_jsxDEV(LogoBanner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"my-3\",\n        children: /*#__PURE__*/_jsxDEV(Breadcrumb, {\n          className: \"brdcum_Style\",\n          children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n            href: \"/mystery-boxes\",\n            children: \"All Mystery Boxes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n            active: true,\n            children: mysteryBox.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MysteryBoxDesc, { ...mysteryBox,\n        buy: () => buyHandler(mysteryBox.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(EventsBlock, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalCustom, {\n      show: showModal,\n      size: \"modal-sm\",\n      customClass: \"buyToken_modalStyle\",\n      title: \"BUY WITH\",\n      onHide: handleClose,\n      children: /*#__PURE__*/_jsxDEV(PaypalButton, {\n        amount: mysteryBox.pricing,\n        currency: \"USD\",\n        onCreatePayment: onCreatePayment,\n        onPaymentSucess: onPaymentSucess,\n        onPaymentError: onPaymentError,\n        onPaymentCancel: onPaymentCancel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Mysterybox, \"qH6G9+43Onz2uwDisSLWjpH948Q=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = Mysterybox;\nexport default Mysterybox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Mysterybox\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Breadcrumb","Col","Container","Row","useNavigate","useParams","brandsApiCallGet","brandsApiCallPost","context","EventsBlock","Layout","LoaderAnimated","ModalCustom","SliderRaffles","MysteryBoxDesc","PaypalButton","toasts","banner","BreadcrumbCustom","LogoBanner","Mysterybox","props","loading","setLoading","mysteryBox","setMysteryBox","loginState","showModal","setShowModal","handleClose","navigate","params","mysteryBoxData","location","state","console","log","getMysteryBox","id","then","res","data","catch","error","buyHandler","user","accessToken","onCreatePayment","type","onPaymentSucess","order_id","mystery_box_id","payment_status","status","payment_id","purchase_units","payments","captures","amount","value","goBack","onPaymentError","onPaymentCancel","paddingLeft","paddingRight","title","pricing"],"sources":["/home/eagle/Projects/bouldl/src/component/pages/public/mysterybox/Mysterybox.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Breadcrumb, Col, Container, Row } from \"react-bootstrap\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { brandsApiCallGet, brandsApiCallPost } from \"../../../../Axios/Brands\";\nimport { context } from \"../../../../Context/MainContext\";\nimport {\n  EventsBlock,\n  Layout,\n  LoaderAnimated,\n  ModalCustom,\n  SliderRaffles,\n} from \"../../../common\";\nimport MysteryBoxDesc from \"../../../common/mysteryBoxDesc/MysteryBoxDesc\";\nimport PaypalButton from \"../../../common/paypal/paypal\";\nimport { toasts } from \"../../../common/Toast/Toast\";\nimport banner from \"../../../../assets/images/home/home_banner.jpg\";\nimport BreadcrumbCustom from \"../../../common/breadcrumb/BreadcrumbCustom\";\nimport LogoBanner from \"../../../common/logoBanner/LogoBanner\";\n\nconst Mysterybox = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [mysteryBox, setMysteryBox] = useState({});\n  const { loginState } = useContext(context);\n  const [showModal, setShowModal] = useState(false);\n  const handleClose = () => setShowModal(false);\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const mysteryBoxData = props.location.state.mysteryBox;\n  console.log(\"mysteryBoxData\", mysteryBoxData);\n\n  useEffect(() => {\n    getMysteryBox(params.id);\n  }, []);\n\n  const getMysteryBox = (id) => {\n    setLoading(true);\n    brandsApiCallGet(`mysterybox/api/v1/${id}`)\n      .then((res) => {\n        setLoading(false);\n        setMysteryBox(res?.data);\n      })\n      .catch((error) => {\n        setLoading(false);\n      });\n  };\n\n  const buyHandler = () => {\n    if (loginState.user.accessToken) {\n      setShowModal(true);\n    } else {\n      toasts.error(\"Please Login\");\n    }\n  };\n\n  const onCreatePayment = (id, type) => {\n    setLoading(true);\n    if (loginState.user.accessToken) {\n    } else {\n      setLoading(false);\n      toasts.error(\"Please Login\");\n    }\n  };\n\n  const onPaymentSucess = (res, type) => {\n    setLoading(true);\n    console.log(\"onPaymentSucess\", res);\n    let data = {\n      order_id: res?.id,\n      mystery_box_id: mysteryBox.id,\n      payment_status: res?.status,\n      payment_id: res.purchase_units[0].payments.captures[0].id,\n      // payment_gateway_id: \"PAYPAL\",\n      amount: res.purchase_units[0].amount.value,\n    };\n    brandsApiCallPost(`mysterybox/api/v1/buy-mysterybox`, data, {}, \"toastOn\")\n      .then((res) => {\n        setLoading(false);\n        setShowModal(false);\n        navigate.goBack();\n        console.log(\"buyHandler\", res);\n      })\n      .catch((error) => {\n        setLoading(false);   \n        setShowModal(false);\n      });\n  };\n  const onPaymentError = () => {\n    setLoading(false);\n    navigate(\"/user/order/failed\");\n  };\n\n  const onPaymentCancel = (res) => {\n    navigate(\"/user/order/failed\");\n  };\n\n  return (\n    <Layout style={{ paddingLeft: \"0px\", paddingRight: \"0px\" }}>\n      <LoaderAnimated isLoading={loading} />\n      <Container fluid className=\"mainBannerStyle\">\n      <LogoBanner />\n      </Container>\n      <Container>\n        <Row className=\"my-3\">\n          <Breadcrumb className=\"brdcum_Style\">\n            <Breadcrumb.Item href=\"/mystery-boxes\">\n              All Mystery Boxes\n            </Breadcrumb.Item>\n            <Breadcrumb.Item active>{mysteryBox.title}</Breadcrumb.Item>\n          </Breadcrumb>\n        </Row>\n        <MysteryBoxDesc {...mysteryBox} buy={() => buyHandler(mysteryBox.id)}/>\n      </Container>\n      <Container>\n        {/* <SliderRaffles /> */}\n        <EventsBlock />\n      </Container>\n      <ModalCustom\n        show={showModal}\n        size=\"modal-sm\"\n        customClass=\"buyToken_modalStyle\"\n        title={\"BUY WITH\"}\n        onHide={handleClose}\n      >\n        <PaypalButton\n          amount={mysteryBox.pricing}\n          currency=\"USD\"\n          onCreatePayment={onCreatePayment}\n          onPaymentSucess={onPaymentSucess}\n          onPaymentError={onPaymentError}\n          onPaymentCancel={onPaymentCancel}\n        />\n      </ModalCustom>\n    </Layout>\n  );\n};\n\nexport default Mysterybox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}